<!--
DX STORE - One-page luxury MVP (payment + Supabase integration)
Updated: Adds payment modal with options (COD, JazzCash, EasyPaisa, SadaPay),
upload screenshot + optional transaction id, contact number, and Supabase integration.

USAGE NOTES (important):
1. Create a Supabase Storage bucket named: payment_screenshots (or update the BUCKET_NAME constant below).
2. Create a Supabase table named `payments` with columns:
   - id (uuid) PRIMARY KEY DEFAULT gen_random_uuid()
   - method (text)
   - contact (text)
   - transaction_id (text)
   - image_path (text)
   - created_at (timestamp with time zone) DEFAULT now()
   - product_id (text) -- optional
3. Replace logo.png with your actual logo and add product cards in the #products-grid.
4. This file contains your Supabase URL and anon key (as provided). Keep them safe.

--><!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DX STORE — Timeless Luxury</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <meta name="description" content="DX STORE — Luxury watches. Delivery all over Pakistan. Contact/WhatsApp: +92 300 5381443">
  <style>
    :root{ --bg:#0b0b0b; --card:#0f0f10; --muted:#bfb8ae; --gold:#c9a15b; --accent:linear-gradient(90deg,var(--gold),#f0d9a0); --max-width:1100px; --radius:14px; font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:radial-gradient(1200px 600px at 10% 10%, rgba(201,161,91,0.04), transparent), var(--bg);color:#efece6;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;line-height:1.45}
    .container{max-width:var(--max-width);margin:0 auto;padding:28px}
    header{padding:36px 0;position:relative}
    .nav{display:flex;align-items:center;justify-content:space-between}
    .logo{display:flex;align-items:center;gap:12px}
    .logo img{height:56px;width:auto;display:block}
    .nav .cta{background:transparent;border:1px solid rgba(201,161,91,0.18);padding:10px 16px;border-radius:10px;color:var(--gold);cursor:pointer}
    .hero{display:grid;grid-template-columns:1fr 420px;gap:40px;align-items:center;padding:40px 0}
    .hero-left h1{font-family:Lora, serif;font-size:44px;margin:0 0 12px;color:#fff}
    .hero-left p{color:var(--muted);font-size:18px;margin:0 0 22px}
    .btn-primary{background:linear-gradient(90deg, rgba(201,161,91,0.12), rgba(201,161,91,0.06));border:1px solid rgba(201,161,91,0.32);padding:12px 18px;border-radius:10px;color:var(--gold);font-weight:600;cursor:pointer}
    .hero-right{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);padding:28px;border-radius:16px;text-align:center}
    .logo-placeholder{height:160px;display:flex;align-items:center;justify-content:center}
    section{padding:36px 0;border-top:1px solid rgba(255,255,255,0.02)}
    h2{font-family:Lora, serif;color:#fff;margin:0 0 8px}
    p.lead{color:var(--muted);margin:0 0 18px}
    #products-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .product-card{background:var(--card);padding:16px;border-radius:12px;border:1px solid rgba(255,255,255,0.02);display:flex;flex-direction:column;gap:12px}
    .product-card .media{height:180px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.2));border-radius:10px;display:flex;align-items:center;justify-content:center;color:var(--muted)}
    .product-card h3{margin:0;font-size:16px}
    .product-card .price{color:var(--gold);font-weight:700}
    .product-actions{display:flex;gap:8px;margin-top:auto}
    .btn-outline{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted);cursor:pointer;text-decoration:none}
    .contact-card{background:linear-gradient(180deg, rgba(201,161,91,0.03), transparent);padding:20px;border-radius:12px;border:1px solid rgba(201,161,91,0.08);display:flex;align-items:center;gap:16px}
    .wa-btn{display:inline-flex;align-items:center;gap:10px;padding:12px 14px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--gold),#f0d9a0);color:#111;font-weight:600;cursor:pointer;text-decoration:none}
    footer{padding:28px 0;text-align:center;color:var(--muted);font-size:14px}
    /* Modal styles */
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,2,2,0.6);display:none;align-items:center;justify-content:center;padding:20px;z-index:1200}
    .modal{background:linear-gradient(180deg,#0e0e0e,#0b0b0b);border-radius:12px;padding:20px;max-width:520px;width:100%;box-shadow:0 12px 40px rgba(0,0,0,0.6);border:1px solid rgba(201,161,91,0.06)}
    .payment-methods{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .method{flex:1;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:rgba(255,255,255,0.01);cursor:pointer;text-align:center}
    .method.selected{border-color:rgba(201,161,91,0.35);box-shadow:0 6px 18px rgba(201,161,91,0.05)}
    .form-row{margin-top:12px}
    input[type=file]{width:100%}
    .small{font-size:13px;color:var(--muted)}
    .muted{color:var(--muted)}@media (max-width:1000px){ .hero{grid-template-columns:1fr} #products-grid{grid-template-columns:repeat(2,1fr)} .logo img{height:48px} }
@media (max-width:640px){ .container{padding:18px} h1{font-size:28px} #products-grid{grid-template-columns:1fr} .hero-left h1{font-size:32px} .logo img{height:40px} }

  </style>
</head>
<body>
  <div class="container">
    <header>
      <nav class="nav">
        <div class="logo">
          <img src="logo.png" alt="DX STORE logo" onerror="this.style.opacity=0.6;this.style.filter='grayscale(80%)'">
          <div style="line-height:1">
            <div style="font-weight:700;letter-spacing:1px">DX STORE</div>
            <div style="font-size:12px;color:var(--muted)">Timeless Luxury</div>
          </div>
        </div>
        <div>
          <button class="nav-cta btn-primary" onclick="document.getElementById('products').scrollIntoView({behavior:'smooth'})">Shop</button>
        </div>
      </nav><div class="hero">
    <div class="hero-left">
      <h1>Timeless Luxury, Crafted for You.</h1>
      <p class="lead">Discover elegant watches that define your personality—precision, prestige, perfection. Delivery only all over Pakistan.</p>
      <div style="display:flex;gap:12px">
        <button class="btn-primary" onclick="document.getElementById('products').scrollIntoView({behavior:'smooth'})">Explore Collections</button>
        <a class="wa-btn" href="https://wa.me/923005381443" target="_blank" rel="noopener">Message on WhatsApp</a>
      </div>
    </div>
    <aside class="hero-right">
      <div class="logo-placeholder">
        <img src="logo.png" alt="DX STORE Logo" onerror="this.style.opacity=0.6">
      </div>
      <p style="color:var(--muted);margin-top:12px">Authentic premium watches — curated for distinction and style.</p>
    </aside>
  </div>
</header>

<main>
  <section id="about">
    <h2>About DX STORE</h2>
    <p class="lead">At DX STORE, every second reflects craftsmanship and confidence. We offer a curated collection of luxury, classic, and modern watches designed for individuals who appreciate elegance, precision, and power.</p>
    <ul style="color:var(--muted);margin-top:10px">
      <li>100% Authentic Premium Watches</li>
      <li><strong>Delivery: All over Pakistan only</strong></li>
      <li>Cash on Delivery, JazzCash & EasyPaisa & SadaPay supported</li>
      <li>Exclusive offers & instant support via WhatsApp</li>
    </ul>
  </section>

  <section id="products">
    <h2>Collections</h2>
    <p class="lead">Below are example product cards. Click <strong>Buy Now</strong> to start the secure payment flow.</p>

    <div id="products-grid" aria-live="polite">
      <!-- Example products: replace or add your own -->
      <div class="product-card" data-id="prod-001">
        <div class="media">Image placeholder</div>
        <h3>Marquis Chrono</h3>
        <div class="price">PKR 45,000</div>
        <div class="product-actions">
          <button class="btn-outline" onclick="openCheckout('prod-001','Marquis Chrono','45000')">Buy Now</button>
          <button class="btn-outline">Favourite</button>
          <a class="btn-outline" href="https://wa.me/923005381443" target="_blank" rel="noopener">Order via WhatsApp</a>
        </div>
      </div>

      <div class="product-card" data-id="prod-002">
        <div class="media">Image placeholder</div>
        <h3>Regal Classic</h3>
        <div class="price">PKR 28,500</div>
        <div class="product-actions">
          <button class="btn-outline" onclick="openCheckout('prod-002','Regal Classic','28500')">Buy Now</button>
          <button class="btn-outline">Favourite</button>
          <a class="btn-outline" href="https://wa.me/923005381443" target="_blank" rel="noopener">Order via WhatsApp</a>
        </div>
      </div>

      <div class="product-card" data-id="prod-003">
        <div class="media">Image placeholder</div>
        <h3>Limited Edition — Noir</h3>
        <div class="price">PKR 95,000</div>
        <div class="product-actions">
          <button class="btn-outline" onclick="openCheckout('prod-003','Noir Limited','95000')">Buy Now</button>
          <button class="btn-outline">Favourite</button>
          <a class="btn-outline" href="https://wa.me/923005381443" target="_blank" rel="noopener">Order via WhatsApp</a>
        </div>
      </div>

    </div>
  </section>

  <section id="why">
    <h2>Why Choose DX STORE</h2>
    <p class="lead">Authentic pieces, elegant packaging, and fast nationwide delivery. Our customers value quality, reliability, and the personal touch of direct WhatsApp support.</p>
    <div style="display:flex;gap:18px;flex-wrap:wrap;margin-top:12px">
      <div style="min-width:220px;background:rgba(255,255,255,0.02);padding:14px;border-radius:12px">
        <strong>Authenticity Guaranteed</strong>
        <p style="color:var(--muted);margin:6px 0 0">All watches are verified for quality and authenticity.</p>
      </div>
      <div style="min-width:220px;background:rgba(255,255,255,0.02);padding:14px;border-radius:12px">
        <strong>Elegant Packaging</strong>
        <p style="color:var(--muted);margin:6px 0 0">Premium packaging for gifting and safe transit.</p>
      </div>
      <div style="min-width:220px;background:rgba(255,255,255,0.02);padding:14px;border-radius:12px">
        <strong>Nationwide Delivery</strong>
        <p style="color:var(--muted);margin:6px 0 0">Delivery available across Pakistan only.</p>
      </div>
    </div>
  </section>

  <section id="contact">
    <h2>Contact & Support</h2>
    <div class="contact-card">
      <div style="flex:1">
        <div style="font-weight:700">Order or inquire via WhatsApp</div>
        <div style="color:var(--muted);margin-top:6px">Phone / WhatsApp: <strong>+92 300 5381443</strong></div>
      </div>
      <div>
        <a class="wa-btn" href="https://wa.me/923005381443" target="_blank" rel="noopener">✨ Message on WhatsApp</a>
      </div>
    </div>
  </section>
</main>

<footer>
  <div style="max-width:700px;margin:0 auto">
    <div style="font-weight:700">DX STORE</div>
    <div style="color:var(--muted);margin-top:6px">© 2025 DX STORE — Timeless Luxury, Crafted for You.</div>
  </div>
</footer>

  </div>  <!-- Payment Modal -->  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <div style="display:flex;align-items:center;justify-content:space-between">
        <div style="font-weight:700">Complete Your Payment</div>
        <button onclick="closeModal()" aria-label="Close" style="background:transparent;border:none;color:var(--muted);cursor:pointer">✕</button>
      </div><div style="margin-top:10px;color:var(--muted)">Choose a payment method:</div>
  <div class="payment-methods" id="methods">
    <div class="method" data-method="COD">Cash on Delivery (COD)</div>
    <div class="method" data-method="JazzCash">JazzCash</div>
    <div class="method" data-method="EasyPaisa">EasyPaisa</div>
    <div class="method" data-method="SadaPay">SadaPay</div>
  </div>

  <form id="paymentForm" style="display:none" onsubmit="return handleSubmit(event)">
    <input type="hidden" id="productId" name="productId" />
    <input type="hidden" id="productName" name="productName" />
    <input type="hidden" id="productPrice" name="productPrice" />

    <div id="codMessage" style="display:none;margin-top:12px;padding:12px;background:rgba(255,255,255,0.02);border-radius:8px">
      <div style="font-weight:700">Cash on Delivery</div>
      <div class="small muted">Your order will be placed and we will contact you within 24 working hours.</div>
      <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
        <button type="button" class="btn-primary" onclick="confirmCOD()">Confirm Order</button>
        <button type="button" class="btn-outline" onclick="closeModal()">Cancel</button>
      </div>
    </div>

    <div id="onlineForm" style="display:none;margin-top:12px">
      <label class="small">Upload payment screenshot <span style="color:#f6d7a6">(required)</span></label>
      <input id="screenshot" type="file" accept="image/*" required />
      <div class="form-row">
        <label class="small">Transaction ID (optional)</label>
        <input id="txid" type="text" placeholder="e.g. 12345AB" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#fff" />
      </div>
      <div class="form-row">
        <label class="small">Contact Number (WhatsApp) <span style="color:#f6d7a6">(required)</span></label>
        <input id="contactNumber" type="text" placeholder="e.g. +92300xxxxxxx" required style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#fff" />
      </div>

      <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
        <button type="submit" class="btn-primary">Submit Payment</button>
        <button type="button" class="btn-outline" onclick="closeModal()">Cancel</button>
      </div>
    </div>
  </form>

</div>

  </div>  <!-- Supabase client (UMD) -->  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>  <script>
    // --------- Configuration (replace if needed) ---------
    const SUPABASE_URL = 'https://exatuekkxfioeyuckpfe.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV4YXR1ZWtreGZpb2V5dWNrcGZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE0ODY5MjcsImV4cCI6MjA3NzA2MjkyN30.JwV4Ozh9apRNsBA5DKwLiw9fzukw2IZYSaKwzJ8vwwM';
    const BUCKET_NAME = 'payment_screenshots'; // create this bucket in Supabase storage
    const supabase = supabaseJs.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    // Utility: generate filename
    function genFilename(filename){
      const ext = filename.split('.').pop();
      const ts = Date.now();
      const rnd = Math.random().toString(36).slice(2,8);
      return `payments/${ts}_${rnd}.${ext}`;
    }

    // Modal logic
    const modal = document.getElementById('modalBackdrop');
    const methodsEl = document.getElementById('methods');
    let selectedMethod = null;

    methodsEl.addEventListener('click', (e)=>{
      const m = e.target.closest('.method');
      if(!m) return;
      methodsEl.querySelectorAll('.method').forEach(x=>x.classList.remove('selected'));
      m.classList.add('selected');
      selectedMethod = m.dataset.method;
      showFormFor(selectedMethod);
    });

    function openCheckout(productId, name, price){
      document.getElementById('productId').value = productId;
      document.getElementById('productName').value = name;
      document.getElementById('productPrice').value = price;
      // reset selections
      methodsEl.querySelectorAll('.method').forEach(x=>x.classList.remove('selected'));
      selectedMethod = null;
      document.getElementById('paymentForm').style.display='none';
      document.getElementById('codMessage').style.display='none';
      document.getElementById('onlineForm').style.display='none';
      modal.style.display='flex';
      modal.setAttribute('aria-hidden','false');
    }
    function closeModal(){ modal.style.display='none'; modal.setAttribute('aria-hidden','true'); }

    function showFormFor(method){
      document.getElementById('paymentForm').style.display='block';
      if(method === 'COD'){
        document.getElementById('codMessage').style.display='block';
        document.getElementById('onlineForm').style.display='none';
      } else {
        document.getElementById('codMessage').style.display='none';
        document.getElementById('onlineForm').style.display='block';
      }
    }

    // Confirm COD
    async function confirmCOD(){
      const productId = document.getElementById('productId').value;
      const productName = document.getElementById('productName').value;
      const contact = prompt('Please enter your contact number (WhatsApp) to confirm COD order:','+92');
      if(!contact){ alert('Contact number is required to place COD order.'); return; }
      // Save to Supabase table `payments` (image_path null for COD)
      try{
        const { data, error } = await supabase.from('payments').insert([{ product_id: productId, method: 'COD', contact: contact, transaction_id: null, image_path: null }]);
        if(error) console.error(error);
      }catch(err){console.error(err)}
      alert('Your order has been placed. We will contact you within 24 working hours.');
      closeModal();
    }

    // Handle online payment submit (upload + insert)
    async function handleSubmit(e){
      e.preventDefault();
      if(!selectedMethod){ alert('Please choose a payment method.'); return false; }
      const fileInput = document.getElementById('screenshot');
      const txid = document.getElementById('txid').value || null;
      const contact = document.getElementById('contactNumber').value || '';
      const productId = document.getElementById('productId').value || null;
      if(!fileInput.files || fileInput.files.length === 0){ alert('Please upload a payment screenshot.'); return false; }
      if(!contact){ alert('Please enter your contact number.'); return false; }

      const file = fileInput.files[0];
      const filename = genFilename(file.name);

      // upload to Supabase storage
      try{
        const { data: uploadData, error: uploadError } = await supabase.storage.from(BUCKET_NAME).upload(filename, file, { cacheControl: '3600', upsert: false });
        if(uploadError){ console.error('Upload error', uploadError); alert('Upload failed. Please try again.'); return false; }

        // public URL — use getPublicUrl
        const { data: publicData } = supabase.storage.from(BUCKET_NAME).getPublicUrl(filename);
        const imageUrl = publicData ? publicData.publicUrl : null;

        // insert metadata into payments table
        const { data, error } = await supabase.from('payments').insert([{ product_id: productId, method: selectedMethod, contact: contact, transaction_id: txid, image_path: filename }]);
        if(error){ console.error('Insert error', error); alert('Failed to save payment. Try again or contact us on WhatsApp.'); return false; }

        alert('Thank you! Your order has been placed. We will contact you within 24 working hours.');
        closeModal();
      }catch(err){ console.error(err); alert('An error occurred. Please try again.'); }
      return false;
    }

    // Floating WhatsApp
    (function(){
      var waFloat = document.createElement('a');
      waFloat.herf = 'https://wa.me/923005381443'; waFloat.target = '_blank'; waFloat.rel = 'noopener'; waFloat.setAttribute('aria-label','Message DX STORE on WhatsApp'); waFloat.style.position='fixed'; waFloat.style.right='18px'; waFloat.style.bottom='18px'; waFloat.style.padding='12px 14px'; waFloat.style.borderRadius='12px'; waFloat.style.boxShadow='0 6px 18px rgba(0,0,0,0.45)'; waFloat.style.background='linear-gradient(90deg,var(--gold),#f0d9a0)'; waFloat.style.color='#111'; waFloat.style.fontWeight='700'; waFloat.style.textDecoration='none'; waFloat.innerText='WhatsApp'; document.body.appendChild(waFloat);
    })();
  </script>
</body>
</html>
